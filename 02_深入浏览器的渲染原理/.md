# 1 网页的解析过程
首先再浏览器中输入域名
![this](../picture/02/1.png)


![this](../picture/02/2.png)

![this](../picture/02/3.png)



# 2 浏览器的渲染过程
### 一个网页从开始请求到显示的过程
- （1）在浏览器中输入网址，浏览器解析URL，浏览器检查缓存； 
- （2）发送至DNS服务器并获得域名对应的WEB服务器IP地址，将这IP地址缓存以便下次快速查询； 
- （3）与WEB服务器建立TCP连接，进行三次握手； 
- （4）浏览器向WEB服务器的IP地址发送相应的HTTP请求（请求行，请求头，请求体）； 
- （5）WEB服务器响应请求并返回指定URL的数据，
- （6）浏览器下载数据后解析HTML,css,js源文件，浏览器解析 HTML 代码，按照其结构（标签嵌套关系）在内存中构建一个 DOM 树
-  (7)在解析 HTML 的过程中，如果遇到 `<link>`标签引用外部 CSS 文件或 `<style>` 标签包含内联 CSS：获取这些 CSS 文件，浏览器会解析 CSS 代码，构建一个 **CSSOM (CSS Object Model)**  树。
-  (8)浏览器将 DOM 树和 CSSOM 树结合起来，创建一个 **渲染树 (Render Tree)** 

- (9)布局： 浏览器根据渲染树和视口（Viewport）的大小，计算每个节点在屏幕上的精确位置和尺寸


-   (10)绘制 ： 浏览器遍历渲染树，调用图形库（如 Skia）将每个节点绘制成屏幕上的实际像素。这个过程可能发生在多个图层上

-   (11)合成 ： 浏览器将绘制好的各个图层按照正确的顺序（考虑 z-index 等）合并到一起，最终显示在屏幕上。现代浏览器会利用 GPU 进行合成加速，提高性能。

#### 图片
![this](../picture/02/4.png)

![this](../picture/02/5.png)

![this](../picture/02/6.png)


# 3 回流和重绘解析

## 💡 一句话区分：

-   **回流（Reflow）** ：计算元素的几何位置与尺寸（Layout）。
  1. 第一次确定节点的大小和位置，称之为布局（layout）。
  2. 之后对节点的大小、位置修改重新计算称之为回流。

-   **重绘（Repaint）** ：将样式（颜色、字体等）渲染成像素（Painting）。
  1. 第一次渲染内容称之为绘制（paint）。
  2. 之后重新渲染称之为重绘。

* * *

## 🧱 一、什么是回流（Reflow）？

### ✅ 定义：

回流是当页面的**结构或布局发生变化**时，浏览器重新计算 DOM 元素的位置与大小的过程。

### 🧠 触发回流的常见操作：

-   添加、删除 DOM 元素
-   改变元素尺寸、位置（如 `width`, `height`, `padding`, `border`, `display`）
-   改变窗口大小（resize）
-   修改字体大小
-   查询某些属性（如 `offsetTop`, `clientWidth`）时会强制触发回流

### ⚠️ 特点：

-   开销**高**，因为可能会影响整个文档或大量元素的重新布局
-   会导致性能下降，尤其是在动画或频繁操作 DOM 时

* * *

## 🎨 二、什么是重绘（Repaint）？

### ✅ 定义：

重绘是指元素的**外观样式**发生变化后，重新绘制这些像素的过程。

### 🧠 触发重绘的常见操作：

-   改变颜色（`color`、`background-color`）
-   改变可见性（如 `visibility`，不是 `display`）
-   改变文字阴影、边框颜色等不影响布局的样式

### ⚠️ 特点：

-   **比回流轻量**，但也会消耗资源
-   不涉及布局，不重新计算元素尺寸

* * *

## 🔁 三、回流 vs 重绘 对比总结

| 比较项  | 回流（Reflow）                      | 重绘（Repaint）                |
| ---- | ------------------------------- | -------------------------- |
| 触发条件 | 结构或几何属性变化                       | 视觉样式变化但不影响布局               |
| 影响范围 | 当前节点及其所有子节点，甚至整个页面              | 当前节点                       |
| 性能开销 | 高                               | 中等                         |
| 示例   | 改变 `width`, `display`, 插入 DOM 等 | 改变 `color`, `visibility` 等 |

* * *



# 4 合成和性能优化

# 5 defer和async属性 